id,task,owner,status,priority,completion_date,notes,artifacts,verification_commands

# CapeControl MVP Plan (Derived strictly from docs/SYSTEM_SPEC.md)
# Rules for this file:
# - Every row MUST reference a SYSTEM_SPEC section.
# - status MUST be one of: planned | in_progress | blocked | done
# - Payments execution work remains out of scope; NEXT-003 stays blocked.

DOCS-001,Derive downstream management artifacts from SYSTEM_SPEC,docs,done,P0,2026-01-06,"Spec: SYSTEM_SPEC §1.1. Artifacts derive strictly from spec; no code changes.",docs/SYSTEM_SPEC.md,"Manual review: confirm no code/migrations/deploys"

# SYSTEM SPEC COMPLETION (spec has placeholders that must match implementation)
SPEC-001,Fill in Auth Flows details (login/refresh/logout) to match implementation,docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §3.1. Replace placeholders with authoritative behavior (no code changes). Ref: b7c2d48d.",docs/SYSTEM_SPEC.md,"Doc review: confirm matches current behavior"
SPEC-002,Fill in CSRF policy details (token source/cookie/header/protected endpoints),docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §3.2 (see SECURITY_CSRF). Must be canonical + precise. Ref: 27bc09f1.",docs/SYSTEM_SPEC.md,"Doc review: validate against SECURITY_CSRF.md"
SPEC-003,Define Session Guarantees and non-guarantees,docs,planned,P1,,"Spec: SYSTEM_SPEC §3.3. Document guarantees only; avoid implying durability beyond implementation.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-004,Define Frozen vs Flexible areas in spec,docs,planned,P1,,"Spec: SYSTEM_SPEC §3.4 and §8. Establish governance markers without expanding scope.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-005,Define Testing determinism requirements (time/email/rate-limiting),docs,planned,P1,,"Spec: SYSTEM_SPEC §5.1. Specify deterministic test rules; no external calls in tests.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-006,Define 'green CI' guarantees + mocking boundaries,docs,planned,P1,,"Spec: SYSTEM_SPEC §5.2. Document what tests may/must not mock.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-007,Define development rules (branching/merge/commit discipline),docs,planned,P2,,"Spec: SYSTEM_SPEC §6.1. Document workflow rules only.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-008,Define deployment rules (approvals/rollback expectations),docs,planned,P1,,"Spec: SYSTEM_SPEC §6.2. Document guardrails; deploy/migrate separation preserved.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-009,Define migration rules (approvals required; no implicit migrations),docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §6.3 and §2.6.3. Establish management gate for migrations. Ref: dfdd7277.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-010,Define roadmap unlock criteria (NEXT-003 + production launch),docs,planned,P2,,"Spec: SYSTEM_SPEC §7.2 and §4.4. Clarify what unlocks future work without implementing it.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-011,Define change control process (who may edit/review/versioning),docs,planned,P1,,"Spec: SYSTEM_SPEC §8.1. Define update authority and review requirements.",docs/SYSTEM_SPEC.md,"Doc review"
SPEC-012,Add interest-triggered registration UX policy (normative),docs,done,P0,2026-01-23,"Spec: SYSTEM_SPEC §2.5.3. Add normative policy governing registration prompts; no code changes.",docs/SYSTEM_SPEC.md,"Doc review: confirm §2.5.3 present and references updated"

# MVP PAGES & NAVIGATION (authoritative route list)
MVP-ROUTES-001,Publish MVP pages & routes checklist (no code scaffolding),docs,planned,P0,,"Spec: SYSTEM_SPEC §2.5. Derive checklist per route with auth class + data dependency.",docs/MVP_PAGES_AND_ROUTES.md,"Doc review: checklist matches §2.5 exactly"
MVP-ROUTES-002,Define onboarding gate rules (cannot skip onboarding),docs,planned,P0,,"Spec: SYSTEM_SPEC §2.5.8. Document gating expectations; do not implement.",docs/SYSTEM_SPEC.md,"Doc review"

# UX WORK ORDERS (implementation work; execution gated by status)
WO-UX-REG-INTEREST-001,Registration interest capture (UI-only),frontend,in_progress,P0,,"Spec: SYSTEM_SPEC §2.5.3 and §2.5.2. Implement interest-triggered registration prompts and an interest selection step in the registration flow UI; explicitly no persistence/backend changes in this WO.",docs/project-plan.csv,"Post-implementation manual check: prompts only after interest signal; interest selector visible in /register flow; no new persistence/API calls"

# DATA & POSTGRESQL (authoritative scope + governance)
DB-001,Establish Postgres MVP data scope as system-of-record,docs,done,P0,2026-01-06,"Spec: SYSTEM_SPEC §2.6. Scope and exclusions are authoritative.",docs/SYSTEM_SPEC.md,"Doc review"
DB-002,Publish DB migrations playbook (approval gate; no manual prod changes),docs,planned,P0,,"Spec: SYSTEM_SPEC §2.6.3 and §6.3. Playbook must not add new behavior.",docs/playbooks/PLAYBOOK_DB_MIGRATIONS.md,"Doc review"
DB-003,Document DB observability/maintenance expectations (health/logging/backups/local reset),docs,planned,P1,,"Spec: SYSTEM_SPEC §2.6.5. Capture expectations only.",docs/SYSTEM_SPEC.md,"Doc review"

# PAYMENTS (INTENT ONLY) — EXECUTION BLOCKED
NEXT-003,Execute PayFast production transaction,management,blocked,P0,,"Spec: SYSTEM_SPEC §2.4 and §4.4. Explicitly blocked until approval + auth/csrf frozen.",docs/playbooks/PLAYBOOK_NEXT_003_UNBLOCK.md,"Stop: do not execute while blocked"
PAY-INTENT-001,Maintain payments intent-only scope (no implementation in MVP),management,done,P0,2026-01-06,"Spec: SYSTEM_SPEC §4 (Intent Only). Ensure plans/playbooks do not introduce execution work.",docs/SYSTEM_SPEC.md,"Doc review"

# GOVERNANCE PLAYBOOKS (derived guardrails)
GOV-001,Publish auth changes playbook (guardrails for auth/csrf edits),docs,planned,P0,,"Spec: SYSTEM_SPEC §3 and §8. Defines preconditions + stop conditions.",docs/playbooks/PLAYBOOK_AUTH_CHANGES.md,"Doc review"
GOV-002,Publish release & deploy playbook (deploy rules + rollback),docs,planned,P1,,"Spec: SYSTEM_SPEC §6.2 and §6.3. Deploy/migrate separate; approvals required.",docs/playbooks/PLAYBOOK_RELEASE_AND_DEPLOY.md,"Doc review"
GOV-003,Perform management freeze review and publish results,management,planned,P0,,"Spec: SYSTEM_SPEC §3.4, §2.5, §2.6, §4.4. Record what is frozen/flexible/deferred.",docs/FREEZE_REVIEW.md,"Doc review: confirmations present"
GOV-SPOT-001,Formalize Single Point of Truth (SPoT) invariant,docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §8.1. Establish plan primacy and clarify that all artifacts are constrained by the plan. Ref: 7d0ad28c.",docs/PLAYBOOK_OVERVIEW.md,"Doc review: SPoT section present with canonical wording"
WO-GOV-010,Enforce migration governance across autonomy documents,docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §6.3. Bind migration governance into autonomy constraints. Ref: 0b47bc3a.",AUTONOMY_PLAYBOOK.md,"Doc review"
WO-GOV-011,Define migration work order template (normative governance),docs,done,P0,2026-01-22,"Spec: SYSTEM_SPEC §6.3. Define mandatory evidence, approvals, rollback requirements for human migration requests. Ref: 6bc19eed.",docs/templates/WO-MIGRATION.md,"Doc review"
WO-GOV-012,VS_Chat execution scope refinement (low-risk tasks),docs,done,P1,2026-01-22,"Spec: SYSTEM_SPEC §8.1. Explicitly limit VS_Chat direct execution to doc/planning/bookkeeping with one-file/one-commit constraints. Ref: 51659f0e.",AUTONOMY_PLAYBOOK.md,"Doc review"
WO-GOV-013,Define standard Evidence Pack for all Work Orders,docs,done,P1,2026-01-22,"Spec: SYSTEM_SPEC §8.1. Define mandatory evidence commands, clean-tree requirement, scope discipline rule, conditional evidence by WO class, and Robert-only waiver. Ref: 188c67a6.",AUTONOMY_PLAYBOOK.md,"Doc review"
WO-GOV-014,Enforce interest-triggered registration policy in autonomy governance,docs,done,P1,2026-01-23,"Spec: SYSTEM_SPEC §2.5.3 and §8.1. Bind the interest-triggered registration policy into autonomy stop conditions and escalation path.",AUTONOMY_PLAYBOOK.md,"Doc review: confirm §4.7 present and references §2.5.3"

WO-UX-FLOW-VERIFY-003,Validate UI navigation matches clarified user-flow,docs,planned,P1,,"Depends on WO-DOCS-FLOW-MM-001. Scope: UX verification + documentation only. Confirm each user-flow node has a real route/page target (or documented planned placeholder). Identify gaps as new planned WOs. Non-goals: no code, no backend, no deploys.",docs/capecontrol-user-flow.mm,"Doc review: verify user-flow nodes map to routes/pages or are marked planned"
WO-DEPLOY-WORKER-DOCKERFILE-001,Deploy autorisen worker from Dockerfile.worker via Makefile,Robert,CLOSED,P1,2026-01-24,"Scope: Makefile only; autorisen-only; no prod; adds conditional web+worker deploy when Dockerfile.worker exists",676bf9a7ff42cbdb11cfebb9e5f929721b3c1e13,""
WO-DEPLOY-AUTORISEN-REDEPLOY-002,Redeploy autorisen (web+worker) + release proof + HTTP smoke check,Robert,CLOSED,P1,2026-01-24,"Deployed via make deploy-autorisen (web+worker). Releases: v453 web @ 06:17:29 +0200; v454 worker @ 06:17:36 +0200. Smoke: GET / = 200 OK; HEAD disallowed (405). Web logs: boot OK; startup migrations skipped (enabled=False).",958afc0541bbc4cbb3d18c15888eba364691a11a,"heroku releases -a autorisen | head -n 5; curl -I -X GET https://autorisen-dac8e65796e7.herokuapp.com/; heroku logs -a autorisen --num 200 --dyno web.1 | tail -n 80"
