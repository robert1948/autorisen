<map version="0.7.1"><node ID="1" TEXT="Onboarding&#x20;Path&#x20;DB&#x20;&#x28;CapeControl&#x29;"><node ID="2" TEXT="Onboarding&#x20;Flow"><node ID="3" TEXT="Entry&#x20;Points"><node ID="4" TEXT="First&#x20;Login"></node><node ID="5" TEXT="New&#x20;Registration"></node><node ID="6" TEXT="Returning&#x20;&#x28;Incomplete&#x20;Onboarding&#x29;"></node></node><node ID="7" TEXT="Welcome&#x20;Layer"><node ID="8" TEXT="Warm&#x20;Greeting&#x20;+&#x20;Value&#x20;Promise"></node><node ID="9" TEXT="Optional&#x20;CapeAI&#x20;Guide&#x20;Toggle"></node><node ID="10" TEXT="CTAs"><node ID="11" TEXT="Start&#x20;Setup"></node><node ID="12" TEXT="Explore&#x20;Quietly&#x20;&#x28;Read-Only&#x29;"></node><node ID="13" TEXT="Tell&#x20;Me&#x20;What&#x20;You&#x20;Need&#x20;&#x28;CapeAI&#x29;"></node></node><node ID="14" TEXT="Data&#x20;Captured"><node ID="15" TEXT="started_at"></node><node ID="16" TEXT="welcome_seen"></node><node ID="17" TEXT="guide_enabled"></node></node></node><node ID="18" TEXT="Profile&#x20;Setup"><node ID="19" TEXT="Role&#x20;Selection"><node ID="20" TEXT="Individual"></node><node ID="21" TEXT="Team&#x20;Lead"></node><node ID="22" TEXT="Ops&#x20;/&#x20;Compliance"></node><node ID="23" TEXT="Developer"></node></node><node ID="24" TEXT="Org&#x20;Context&#x20;&#x28;Optional&#x29;"><node ID="25" TEXT="company_name"></node><node ID="26" TEXT="industry"></node><node ID="27" TEXT="team_size"></node></node><node ID="28" TEXT="Goals"><node ID="29" TEXT="Primary&#x20;Outcome"></node><node ID="30" TEXT="Time&#x20;Saved&#x20;Target&#x20;&#x28;north-star&#x29;"></node></node><node ID="31" TEXT="Preferences"><node ID="32" TEXT="timezone"></node><node ID="33" TEXT="notification_settings"></node><node ID="34" TEXT="accessibility"></node></node></node><node ID="35" TEXT="Action-Based&#x20;Onboarding"><node ID="36" TEXT="Smart&#x20;Checklist"><node ID="37" TEXT="Task&#x20;Buckets"><node ID="38" TEXT="Connect&#x20;Data"></node><node ID="39" TEXT="Create&#x20;First&#x20;Project"></node><node ID="40" TEXT="Invite&#x20;Teammate"></node><node ID="41" TEXT="Run&#x20;First&#x20;Agent"></node></node><node ID="42" TEXT="Progress&#x20;Bar&#x20;+&#x20;Micro-Wins"></node><node ID="43" TEXT="Skip&#x20;/&#x20;Defer&#x20;With&#x20;Reason"></node></node><node ID="44" TEXT="Evidence&#x20;Hooks"><node ID="45" TEXT="Log&#x20;each&#x20;completion&#x20;event"></node><node ID="46" TEXT="Capture&#x20;minimal&#x20;evidence&#x20;payload"></node></node></node><node ID="47" TEXT="Relationship&#x20;Messaging&#x20;System"><node ID="48" TEXT="Context&#x20;Nudges"><node ID="49" TEXT="Reminder"></node><node ID="50" TEXT="Tip"></node><node ID="51" TEXT="Celebration"></node><node ID="52" TEXT="Trust&#x20;Reassurance"></node></node><node ID="53" TEXT="In-App&#x20;Preferred&#x3B;&#x20;Email&#x20;Optional"></node></node><node ID="54" TEXT="Trust&#x20;Signals"><node ID="55" TEXT="Privacy&#x20;Assurance"></node><node ID="56" TEXT="Security&#x20;Posture&#x20;&#x28;High-level&#x29;"></node><node ID="57" TEXT="Testimonials&#x20;/&#x20;Social&#x20;Proof"></node><node ID="58" TEXT="Data&#x20;Ownership&#x20;/&#x20;Export"></node><node ID="59" TEXT="Explainable&#x20;Actions&#x20;&#x28;What&#x20;CapeAI&#x20;Did&#x29;"></node></node><node ID="60" TEXT="Completion"><node ID="61" TEXT="onboarding_completed&#x3D;true"></node><node ID="62" TEXT="completed_at"></node><node ID="63" TEXT="handoff_to_dashboard"></node></node></node><node ID="64" TEXT="Database&#x20;Design"><node ID="65" TEXT="Tables"><node ID="66" TEXT="users&#x20;&#x28;existing&#x29;"></node><node ID="67" TEXT="user_profile"><node ID="68" TEXT="user_id&#x20;&#x28;PK/FK&#x29;"></node><node ID="69" TEXT="role"></node><node ID="70" TEXT="company_name"></node><node ID="71" TEXT="timezone"></node><node ID="72" TEXT="goals_json"></node><node ID="73" TEXT="preferences_json"></node><node ID="74" TEXT="created_at&#x20;/&#x20;updated_at"></node></node><node ID="75" TEXT="onboarding_sessions"><node ID="76" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="77" TEXT="user_id&#x20;&#x28;FK&#x29;"></node><node ID="78" TEXT="status&#x20;&#x28;active&#x7C;completed&#x7C;abandoned&#x29;"></node><node ID="79" TEXT="version"></node><node ID="80" TEXT="started_at"></node><node ID="81" TEXT="last_step_key"></node><node ID="82" TEXT="completed_at"></node><node ID="83" TEXT="metadata_json"></node></node><node ID="84" TEXT="onboarding_steps&#x20;&#x28;catalog&#x29;"><node ID="85" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="86" TEXT="step_key&#x20;&#x28;unique&#x29;"></node><node ID="87" TEXT="title"></node><node ID="88" TEXT="order_index"></node><node ID="89" TEXT="required&#x20;&#x28;bool&#x29;"></node><node ID="90" TEXT="role_scope_json"></node></node><node ID="91" TEXT="user_onboarding_step_state"><node ID="92" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="93" TEXT="session_id&#x20;&#x28;FK&#x29;"></node><node ID="94" TEXT="step_key"></node><node ID="95" TEXT="status&#x20;&#x28;not_started&#x7C;in_progress&#x7C;done&#x7C;skipped&#x29;"></node><node ID="96" TEXT="started_at"></node><node ID="97" TEXT="completed_at"></node><node ID="98" TEXT="data_json"></node><node ID="99" TEXT="evidence_json"></node></node><node ID="100" TEXT="onboarding_messages"><node ID="101" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="102" TEXT="user_id&#x20;&#x28;FK&#x29;"></node><node ID="103" TEXT="session_id&#x20;&#x28;FK&#x29;"></node><node ID="104" TEXT="type&#x20;&#x28;reminder&#x7C;tip&#x7C;celebration&#x7C;trust&#x29;"></node><node ID="105" TEXT="channel&#x20;&#x28;in_app&#x7C;email&#x29;"></node><node ID="106" TEXT="template_key"></node><node ID="107" TEXT="payload_json"></node><node ID="108" TEXT="scheduled_for"></node><node ID="109" TEXT="sent_at"></node><node ID="110" TEXT="status"></node></node><node ID="111" TEXT="trust_acknowledgements"><node ID="112" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="113" TEXT="user_id&#x20;&#x28;FK&#x29;"></node><node ID="114" TEXT="session_id&#x20;&#x28;FK&#x29;"></node><node ID="115" TEXT="key&#x20;&#x28;privacy&#x7C;security&#x7C;terms&#x29;"></node><node ID="116" TEXT="accepted_at"></node><node ID="117" TEXT="metadata_json"></node></node><node ID="118" TEXT="onboarding_event_log"><node ID="119" TEXT="id&#x20;&#x28;PK&#x29;"></node><node ID="120" TEXT="user_id&#x20;&#x28;FK&#x29;"></node><node ID="121" TEXT="session_id&#x20;&#x28;FK&#x29;"></node><node ID="122" TEXT="event_type"></node><node ID="123" TEXT="payload_json"></node><node ID="124" TEXT="created_at"></node></node></node><node ID="125" TEXT="Indexes&#x20;&#x26;&#x20;Constraints"><node ID="126" TEXT="onboarding_sessions&#x3A;&#x20;&#x28;user_id&#x2C;&#x20;status&#x29;"></node><node ID="127" TEXT="user_onboarding_step_state&#x3A;&#x20;&#x28;session_id&#x2C;&#x20;step_key&#x29;&#x20;unique"></node><node ID="128" TEXT="onboarding_steps&#x3A;&#x20;step_key&#x20;unique"></node></node><node ID="129" TEXT="Enum&#x20;Values"><node ID="130" TEXT="session.status&#x3A;&#x20;active&#x2C;&#x20;completed&#x2C;&#x20;abandoned"></node><node ID="131" TEXT="step_state.status&#x3A;&#x20;not_started&#x2C;&#x20;in_progress&#x2C;&#x20;done&#x2C;&#x20;skipped"></node><node ID="132" TEXT="message.type&#x3A;&#x20;reminder&#x2C;&#x20;tip&#x2C;&#x20;celebration&#x2C;&#x20;trust"></node><node ID="133" TEXT="message.channel&#x3A;&#x20;in_app&#x2C;&#x20;email"></node></node><node ID="134" TEXT="Migration&#x20;Notes"><node ID="135" TEXT="Add&#x20;tables&#x20;without&#x20;breaking&#x20;existing&#x20;auth"></node><node ID="136" TEXT="Seed&#x20;onboarding_steps&#x20;catalog"></node><node ID="137" TEXT="Backfill&#x20;user_profile&#x20;lazily&#x20;on&#x20;first&#x20;login"></node></node></node><node ID="138" TEXT="API&#x20;Contract"><node ID="139" TEXT="Core&#x20;Endpoints"><node ID="140" TEXT="GET&#x20;/api/onboarding/status"></node><node ID="141" TEXT="POST&#x20;/api/onboarding/start"></node><node ID="142" TEXT="PATCH&#x20;/api/onboarding/profile"></node><node ID="143" TEXT="GET&#x20;/api/onboarding/steps"></node><node ID="144" TEXT="POST&#x20;/api/onboarding/steps/&#x7B;step_key&#x7D;/complete"></node><node ID="145" TEXT="POST&#x20;/api/onboarding/steps/&#x7B;step_key&#x7D;/skip"></node><node ID="146" TEXT="POST&#x20;/api/onboarding/trust/&#x7B;key&#x7D;/ack"></node><node ID="147" TEXT="POST&#x20;/api/onboarding/complete"></node></node><node ID="148" TEXT="Auth&#x20;&#x26;&#x20;Security"><node ID="149" TEXT="JWT&#x20;required&#x20;&#x28;user&#x29;"></node><node ID="150" TEXT="CSRF&#x20;policy&#x20;consistent&#x20;with&#x20;existing&#x20;app"></node><node ID="151" TEXT="Audit&#x20;log&#x20;every&#x20;state&#x20;transition"></node></node><node ID="152" TEXT="Response&#x20;Shapes"><node ID="153" TEXT="status&#x3A;&#x20;&#x7B;session&#x2C;&#x20;steps&#x2C;&#x20;progress&#x7D;"></node><node ID="154" TEXT="errors&#x3A;&#x20;use&#x20;error&#x20;envelope&#x20;standard"></node></node></node><node ID="155" TEXT="Frontend&#x20;UX"><node ID="156" TEXT="Routes"><node ID="157" TEXT="/onboarding/welcome"></node><node ID="158" TEXT="/onboarding/profile"></node><node ID="159" TEXT="/onboarding/checklist"></node><node ID="160" TEXT="/onboarding/trust"></node><node ID="161" TEXT="/dashboard"></node></node><node ID="162" TEXT="Components"><node ID="163" TEXT="CapeAIButton&#x20;&#x28;persistent&#x29;"></node><node ID="164" TEXT="ProgressBar"></node><node ID="165" TEXT="ChecklistCard"></node><node ID="166" TEXT="TrustSignalPanel"></node><node ID="167" TEXT="NudgeToast"></node></node><node ID="168" TEXT="State"><node ID="169" TEXT="Load&#x20;onboarding&#x20;status&#x20;on&#x20;app&#x20;boot"></node><node ID="170" TEXT="Route&#x20;guard&#x3A;&#x20;redirect&#x20;until&#x20;completed&#x20;&#x28;configurable&#x29;"></node></node></node><node ID="171" TEXT="Governance&#x20;&#x26;&#x20;Verification"><node ID="172" TEXT="Environments"><node ID="173" TEXT="autorisen&#x20;only&#x20;&#x28;staging/sandbox&#x29;"></node><node ID="174" TEXT="No&#x20;production&#x20;deploy&#x20;unless&#x20;Robert&#x20;explicitly&#x20;instructs"></node></node><node ID="175" TEXT="Evidence&#x20;Pack"><node ID="176" TEXT="DB&#x20;migration&#x20;diff"></node><node ID="177" TEXT="API&#x20;contract&#x20;tests"></node><node ID="178" TEXT="UI&#x20;screenshots&#x20;&#x28;desktop&#x20;+&#x20;mobile&#x29;"></node></node></node></node></map>